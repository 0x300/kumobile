<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>KU Source: file_io.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.cerulean.css">

</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top navbar-inverse">
		<div class="navbar-inner">
			<a class="brand" href="index.html">KU</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="KU.html">KU</a>
						</li>
						
						<li>
							<a href="KU.Directory.html">KU.Directory</a>
						</li>
						
						<li>
							<a href="KU.Events.html">KU.Events</a>
						</li>
						
						<li>
							<a href="KU.FileIO.html">KU.FileIO</a>
						</li>
						
						<li>
							<a href="KU.Library.html">KU.Library</a>
						</li>
						
						<li>
							<a href="KU.Map.html">KU.Map</a>
						</li>
						
						<li>
							<a href="KU.News.html">KU.News</a>
						</li>
						
						<li>
							<a href="KU.Transfer.html">KU.Transfer</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="events.list.html" class="dropdown-toggle" data-toggle="dropdown">Events<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="KU.Directory.html#.event:checkIScroll">KU.Directory.event:checkIScroll</a>
						</li>
						
						<li>
							<a href="KU.Directory.html#.event:checkScroll">KU.Directory.event:checkScroll</a>
						</li>
						
						<li>
							<a href="KU.Directory.html#.event:pageCreate">KU.Directory.event:pageCreate</a>
						</li>
						
						<li>
							<a href="KU.Directory.html#.event:pageInit">KU.Directory.event:pageInit</a>
						</li>
						
						<li>
							<a href="KU.Directory.html#.event:searchDirectChangeEvent">KU.Directory.event:searchDirectChangeEvent</a>
						</li>
						
						<li>
							<a href="KU.Directory.html#.event:searchIncrementalChangeEvent">KU.Directory.event:searchIncrementalChangeEvent</a>
						</li>
						
						<li>
							<a href="KU.Directory.html#.event:tidChangeEvent">KU.Directory.event:tidChangeEvent</a>
						</li>
						
						<li>
							<a href="KU.html#.event:homePageCreate">KU.event:homePageCreate</a>
						</li>
						
						<li>
							<a href="KU.html#.event:pageChange">KU.event:pageChange</a>
						</li>
						
						<li>
							<a href="KU.html#.event:ready">KU.event:ready</a>
						</li>
						
						<li>
							<a href="KU.html#.event:throttledResize">KU.event:throttledResize</a>
						</li>
						
						<li>
							<a href="KU.Events.html#.event:articlePageCreate">KU.Events.event:articlePageCreate</a>
						</li>
						
						<li>
							<a href="KU.Events.html#.event:articlePageInit">KU.Events.event:articlePageInit</a>
						</li>
						
						<li>
							<a href="KU.Events.html#.event:checkIScroll">KU.Events.event:checkIScroll</a>
						</li>
						
						<li>
							<a href="KU.Events.html#.event:checkScroll">KU.Events.event:checkScroll</a>
						</li>
						
						<li>
							<a href="KU.Events.html#.event:pageCreate">KU.Events.event:pageCreate</a>
						</li>
						
						<li>
							<a href="KU.Events.html#.event:pageInit">KU.Events.event:pageInit</a>
						</li>
						
						<li>
							<a href="KU.Library.html#.event:checkIScroll">KU.Library.event:checkIScroll</a>
						</li>
						
						<li>
							<a href="KU.Library.html#.event:checkScroll">KU.Library.event:checkScroll</a>
						</li>
						
						<li>
							<a href="KU.Library.html#.event:pageCreate">KU.Library.event:pageCreate</a>
						</li>
						
						<li>
							<a href="KU.Library.html#.event:pageInit">KU.Library.event:pageInit</a>
						</li>
						
						<li>
							<a href="KU.Library.html#.event:searchDirectChangeEvent">KU.Library.event:searchDirectChangeEvent</a>
						</li>
						
						<li>
							<a href="KU.Library.html#.event:searchIncrementalChangeEvent">KU.Library.event:searchIncrementalChangeEvent</a>
						</li>
						
						<li>
							<a href="KU.Library.html#.event:typeChangeEvent">KU.Library.event:typeChangeEvent</a>
						</li>
						
						<li>
							<a href="KU.Map.html#.event:locationFound">KU.Map.event:locationFound</a>
						</li>
						
						<li>
							<a href="KU.Map.html#.event:mapClickEvent">KU.Map.event:mapClickEvent</a>
						</li>
						
						<li>
							<a href="KU.Map.html#.event:pageCreate">KU.Map.event:pageCreate</a>
						</li>
						
						<li>
							<a href="KU.Map.html#.event:pageInit">KU.Map.event:pageInit</a>
						</li>
						
						<li>
							<a href="KU.Map.html#.event:readPOI_Fail">KU.Map.event:readPOI_Fail</a>
						</li>
						
						<li>
							<a href="KU.Map.html#.event:readPOI_Success">KU.Map.event:readPOI_Success</a>
						</li>
						
						<li>
							<a href="KU.Map.html#.event:searchDirectChangeEvent">KU.Map.event:searchDirectChangeEvent</a>
						</li>
						
						<li>
							<a href="KU.Map.html#.event:searchIncrementalChangeEvent">KU.Map.event:searchIncrementalChangeEvent</a>
						</li>
						
						<li>
							<a href="KU.News.html#.event:articlePageCreate">KU.News.event:articlePageCreate</a>
						</li>
						
						<li>
							<a href="KU.News.html#.event:articlePageInit">KU.News.event:articlePageInit</a>
						</li>
						
						<li>
							<a href="KU.News.html#.event:checkIScroll">KU.News.event:checkIScroll</a>
						</li>
						
						<li>
							<a href="KU.News.html#.event:checkScroll">KU.News.event:checkScroll</a>
						</li>
						
						<li>
							<a href="KU.News.html#.event:pageCreate">KU.News.event:pageCreate</a>
						</li>
						
						<li>
							<a href="KU.News.html#.event:pageInit">KU.News.event:pageInit</a>
						</li>
						
						<li>
							<a href="KU.Transfer.html#.event:changeTypeToCollege">KU.Transfer.event:changeTypeToCollege</a>
						</li>
						
						<li>
							<a href="KU.Transfer.html#.event:changeTypeToCourse">KU.Transfer.event:changeTypeToCourse</a>
						</li>
						
						<li>
							<a href="KU.Transfer.html#.event:collegeDropdownChangeEvent">KU.Transfer.event:collegeDropdownChangeEvent</a>
						</li>
						
						<li>
							<a href="KU.Transfer.html#.event:pageCreate">KU.Transfer.event:pageCreate</a>
						</li>
						
						<li>
							<a href="KU.Transfer.html#.event:pageInit">KU.Transfer.event:pageInit</a>
						</li>
						
						<li>
							<a href="KU.Transfer.html#.event:searchDirectChangeEvent">KU.Transfer.event:searchDirectChangeEvent</a>
						</li>
						
						<li>
							<a href="KU.Transfer.html#.event:searchIncrementalChangeEvent">KU.Transfer.event:searchIncrementalChangeEvent</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
			<div class="span12">
				
				<div id="main">
					


		<h1 class="page-title">Source: file_io.js</h1>
    
<section>
	<article>
		<pre
			class="sunlight-highlight-javascript linenums">/*
 	This file is part of KUMobile.

	KUMobile is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    KUMobile is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with KUMobile.  If not, see &lt;http://www.gnu.org/licenses/>.
*/



/******************************************************************************/
/** Local file control used to make saving and reading files MUCH easier then the
 *  plugin allows for. 
 * 	@example 
 *  // Read Example
 *  var success = function(result){
 *       alert(result);
 *  };
 *  var fail = function(errorcode){
 *       alert("Fail call back :( " + errorcode);
 *  };
 *  
 *  KU.FileIO.readFromFile("TestAppKUMobile.txt", success, fail);
 *  @example
 *  // Write Example
 *  var success = function(){
 *       alert("Success!");
 *  };
 *  var fail = function(errorcode){
 *       alert("Fail call back :( " + errorcode);
 *  };
 *  
 *  KU.FileIO.writeToFile("TestAppKUMobile.txt", "Secret Message!", success, fail);
 *  @namespace
 ******************************************************************************/
KU.FileIO = {
	
	
	
	/******************************************************************************/
	/** Name of the current file.
	 *  @type {string}
	 *  @ignore
	 ******************************************************************************/
	fileName: null,
	
	
	
	/******************************************************************************/
	/** Contents of current file (the entire point of reading)
	 *  @type {string}
	 *  @ignore
	 ******************************************************************************/
	fileContents: null,



	/******************************************************************************/
	/** Method to callback on ANY failure
	 *  @type {Function}
	 *  @ignore
	 ******************************************************************************/
	failCallback: null,
	
	
	
	/******************************************************************************/
	/** Method to callback on complete success. 
	 *  @type {Function}
	 *  @ignore
	 ******************************************************************************/
	successCallback: null,
	
	
	
	/******************************************************************************/
	/**  Enables debug messages via alert messages. Do NOT enable this unless there
	 *   are legitimate problems with plugins (not available to debug via browser).
	 *   @type {boolean}
	 *   @constant
	 ******************************************************************************/
	 debug: false,
	
	
	
	/******************************************************************************/
	/** Writes contents to file with proper callbacks. 
	 *  @param {string} name - filename to save to
	 *  @param {string} content - what we want to save (usually JSON string)
	 *  @param {Function} success - callback for successful writing
	 *  @param {Function} failure - callback for failure of writing
	 ******************************************************************************/
	 writeToFile: function(name, content, success, failure){
		
		// Configure
		this.fileName = name;
		this.fileContents = content;
		this.successCallback = success;
		this.failCallback = failure;
		
		if(KU.FileIO.debug) alert("Received write info!");
		window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, KU.FileIO.write_GotFS, KU.FileIO.fail);
	},
	
	
	
	/******************************************************************************/
	/** Reads contents from file with proper callbacks. 
	 *  @param {string} name - filename to read from 
	 *  @param {Function} success - callback for successful writing
	 *  @param {Function} failure - callback for failure of writing
	 ******************************************************************************/
	readFromFile: function(name, success, failure){
		
		// Configure
		this.fileName = name;
		this.fileContents = "";
		this.successCallback = success;
		this.failCallback = failure;
		
		if(KU.FileIO.debug) alert("Received read info!");
		window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, KU.FileIO.read_GotFS, KU.FileIO.fail);
	},
	
	
	
	/******************************************************************************/
	/** Triggered after filesystem is retrieved 
	 *  @param {FileSystem} fileSystem - file system to read from
	 *  @ignore
	 ******************************************************************************/
	 read_GotFS: function(fileSystem) {
	
		if(KU.FileIO.debug) alert("Got FS");
		
		// Get specified file
		fileSystem.root.getFile(KU.FileIO.fileName, null, KU.FileIO.read_GotFileEntry, KU.FileIO.fail);
	},
	
	
	
	/******************************************************************************/
	/** Triggered after fileentry is retrieved 
	 *  @param {FileEntry} fileSystem - file entry to read from
	 *  @ignore
	 ******************************************************************************/
	read_GotFileEntry: function(fileEntry) {
		
		if(KU.FileIO.debug) alert("Got file entry");
		
		// Create a writer
		fileEntry.file(KU.FileIO.read_GotFile, KU.FileIO.fail);
	},
	
	
	
	/******************************************************************************/
	/** Triggered after file is retrieved 
	 *  @param {File} file - file that we want to read from
	 *  @ignore
	 ******************************************************************************/
	 read_GotFile: function(file){
		
		if(KU.FileIO.debug) alert("Got file");
		
		KU.FileIO.read_ReadAsText(file);
	},
	
	
	
	/******************************************************************************/
	/** Triggered after file is ready to be read from
	 *  @param {File} file - file used to read from
	 *  @ignore
	 ******************************************************************************/
	read_ReadAsText: function(file) {

		if(KU.FileIO.debug) alert("Reading as text");
		
		// Configure reader
		var reader = new FileReader();
		
		reader.onloadend = function(evt) {
			KU.FileIO.successCallback(evt.target.result);
		};
		
		// Read!
		reader.readAsText(file);
	},
	
	
	
	/******************************************************************************/
	/** Triggered after file system is ready
	 *  @param {FileSystem} fileSystem - file system used
	 *  @ignore
	 ******************************************************************************/
	write_GotFS: function(fileSystem) {
	
		if(KU.FileIO.debug) alert("Got FS " + KU.FileIO.fileName + " "  + KU.FileIO.fail + " " + KU.FileIO.write_GotFileEntry);
		
		// Get specified file
		fileSystem.root.getFile(KU.FileIO.fileName, {create: true, exclusive: false}, KU.FileIO.write_GotFileEntry, KU.FileIO.fail);
	},

	
	
	/******************************************************************************/
	/** Triggered after file entry is ready
	 *  @param {FileEntry} fileEntry - file entry used
	 *  @ignore
	 ******************************************************************************/
	write_GotFileEntry: function(fileEntry) {
		
		if(KU.FileIO.debug) alert("Got file entry");
		
		// Create a writer
		fileEntry.createWriter(KU.FileIO.write_GotFileWriter, KU.FileIO.fail);
	},

	
	
	/******************************************************************************/
	/** Triggered after file writer is ready
	 *  @param {FileWriter} writer - writer we will write with
	 *  @ignore
	 ******************************************************************************/
	write_GotFileWriter: function(writer) {

		if(KU.FileIO.debug) alert("Writing");
		
		// Callback for write finish
		writer.onwriteend = function(evt) {
			
			if(KU.FileIO.debug) alert("Done writing");
			
			// Call success function
			KU.FileIO.successCallback();
		};
		
		// Write content!
		writer.write(KU.FileIO.fileContents);
	},

	
	
	/******************************************************************************/
	/** Triggered anytime a failure occurs
	 *  @param {FileError} error - error message containing relevant information
	 *  @ignore
	 ******************************************************************************/
	fail: function(error) {
		
		if(KU.FileIO.debug) alert("Error :(");
		
		// Callback for error
		KU.FileIO.failCallback(error.code);
	}

};</pre>
	</article>
</section>





				</div>

				<div class="clearfix"></div>
				<footer>
					
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha13</a>
		on Wed Dec 24th 2014 using the <a
			href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<br clear="both">
		</div>

	</div>
	<!--<script src="scripts/sunlight.js"></script>-->
	<script src="scripts/docstrap.lib.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>

	<script>
		$( function () {
			$( "[id*='$']" ).each( function () {
				var $this = $( this );

				$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
			} );

			$( "#toc" ).toc( {
				anchorName  : function ( i, heading, prefix ) {
					return $( heading ).attr( "id" ) || ( prefix + i );
				},
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : "100px"
			} );

			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );
			$( '.dropdown-toggle' ).dropdown();
//			$( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

			$( ".tutorial-section pre, .readme-section pre" ).each( function () {
				var $this = $( this );

				var example = $this.find( "code" );
				exampleText = example.html();
				var lang = /{@lang (.*?)}/.exec( exampleText );
				if ( lang && lang[1] ) {
					exampleText = exampleText.replace( lang[0], "" );
					example.html( exampleText );
					lang = lang[1];
				} else {
					lang = "javascript";
				}

				if ( lang ) {

					$this
						.addClass( "sunlight-highlight-" + lang )
						.addClass( "linenums" )
						.html( example.html() );

				}
			} );

			Sunlight.highlightAll( {
				lineNumbers : true,
				showMenu : true,
				enableDoclinks : true
			} );
		} );
	 </script>



	<!--Navigation and Symbol Display-->
	


	<!--Google Analytics-->
	

</body>
</html>
